From c3fbefd1f0ce51ee9e326c7cd3d7e098f53b7fea Mon Sep 17 00:00:00 2001
From: Vladimir Ermakov <vooon341@gmail.com>
Date: Sat, 21 Jun 2014 16:21:46 +0400
Subject: [PATCH 7/7] Add supported dialests list to find_package() script.

---
 CMakeLists.txt  | 1 +
 config.cmake.in | 5 +++++
 2 files changed, 6 insertions(+)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 2f36980..c5f2d28 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -83,6 +83,7 @@ set(PKG_VERSION ${PROJECT_VERSION})
 set(PKG_DESC "mavlink message marshalling library")
 set(PKG_LIBRARIES )
 set(PKG_DEPENDS )
+set(PKG_MAVLINK_DEFINITIONS "${v1.0Definitions}")
 
 configure_file(config.cmake.in ${PROJECT_NAME}-config.cmake @ONLY)
 install(FILES ${PROJECT_BINARY_DIR}/${PROJECT_NAME}-config.cmake
diff --git a/config.cmake.in b/config.cmake.in
index f56baa5..8786d78 100644
--- a/config.cmake.in
+++ b/config.cmake.in
@@ -24,3 +24,8 @@ foreach(dep @PKG_DEPENDS@)
   list(APPEND @PKG_NAME@_INCLUDE_DIRS ${${dep}_INCLUDE_DIRS})
   list(APPEND @PKG_NAME@_LIBRARIES ${${dep}_LIBRARIES})
 endforeach()
+
+foreach(def @PKG_MAVLINK_DEFINITIONS@)
+  get_filename_component(dialect ${def} NAME_WE)
+  list(APPEND @PKG_NAME@_DIALECTS ${dialect})
+endforeach()
-- 
1.9.1

